function shuffle(a){for(var b,c,d=a.length;d;b=Math.floor(Math.random()*d),c=a[--d],a[d]=a[b],a[b]=c);return a}!function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelRequestAnimationFrame=window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}();var dotProgress=dotProgress||{};dotProgress.DotController=function(a,b,c,d){"use strict";var e,f=function(a,e,f,h){g();for(var i,j=a*e,k=e*h/2,l=a*h/2,m=0;j>m;m++)i=new dotProgress.Point3d,i.x3d=Math.floor(m/a)*h-k,i.y3d=m%a*h-l,i.z3d=f/2*h,b.particles.push(i);c.shuffle&&d(b.particles)},g=function(){},h=function(){i(),b.active=!0,e=a.requestAnimationFrame(m)},i=function(){b.active=!1,a.cancelAnimationFrame(e)},j=function(a){for(var c=b.particles.length,d=0;c>d;d++){var e=b.particles[d],f=d/c;e.active=a>=f?!0:!1}},k=function(a,c){b.scaleX=a/dotProgress.defaultOptions.width,b.scaleY=c/dotProgress.defaultOptions.height},l=function(){for(var a,d,e,f=b.particles.length,g=c.depth/2*c.spacing,h=-g,i=0;f>i;i++)d=b.particles[i],e=d.active?h:g,a=e-d.z3d,0!==a&&(a>0?d.z3d+=c.transitionVel:d.z3d-=c.transitionVel)},m=function(){b.xRotation+=c.xRotVel,b.yRotation+=c.yRotVel,b.zRotation+=c.zRotVel,dotProgress.flatten3d(b.fov,b.xRotation,b.yRotation,b.zRotation,b.particles),l(),e=a.requestAnimationFrame(m)},n=function(){i(),g()};return k(c.width,c.height),f(c.rows,c.columns,c.depth,c.spacing),h(),{start:h,stop:i,setProgress:j,remove:n}};var dotProgress=dotProgress||{};dotProgress.defaultOptions={inactiveDisplay:"X",activeDisplay:"O",width:150,height:150,spacing:10,rows:5,columns:5,depth:5,xRotVel:.015,yRotVel:.021,zRotVel:0,transitionVel:1,shuffle:!0};var dotProgress=dotProgress||{};dotProgress.Field3d=function(){"use strict";return{fov:600,xRotation:0,yRotation:0,zRotation:0,particles:[],active:!0}};var dotProgress=dotProgress||{};dotProgress.Point3d=function(){"use strict";return{active:!1,scale:1,x3d:0,y3d:0,z3d:0,x2d:0,y2d:0}};var dotProgress=dotProgress||{};dotProgress.FieldView=function(a,b,c,d){var e,f=[],g=b.createElement("div");g.className="dot-field",g.style.position="relative",g.style.width=d.width+"px",g.style.height=d.height+"px";var h=function(){c.active&&(j(),k(),l())},i=function(){e=a.requestAnimationFrame(i),h()},j=function(){for(var a=c.particles.length,e=f.length;a>e;){var h=new dotProgress.PointView(b,d);g.appendChild(h.div),f.push(h),e++}},k=function(){for(var a=c.particles.length;f.length>a;){var b=f.pop();g.removeChild(b.div)}},l=function(){for(var a=c.particles.length,b=0;a>b;b++){var d=c.particles[b],e=f[b];e.setPosition(d.x2d,d.y2d,d.scale,d.active)}},m=function(){i()},n=function(){a.cancelAnimationFrame(e)},o=function(){for(;g.lastChild;)g.removeChild(g.lastChild);g=null,f=null};return m(),{div:g,start:m,stop:n,render:h,remove:o}};var dotProgress=dotProgress||{};dotProgress.PointView=function(){var a=function(a,b){this.div=a.createElement("div"),this.options=b,this.showActive(!1)};return a.prototype.setPosition=function(a,b,c,d){this.div.style.position="absolute",this.div.style.left=a+this.options.halfWidth+"px",this.div.style.top=b+this.options.halfHeight+"px",this.div.style.zIndex=Math.round(100*c)+200,d!==this.active&&this.showActive(d)},a.prototype.showActive=function(a){a?(this.div.className="dot-active",this.div.innerHTML=this.options.activeDisplay):(this.div.className="dot-inactive",this.div.innerHTML=this.options.inactiveDisplay),this.active=a},a}();var dotProgress=dotProgress||{};dotProgress.DotProgress=function(a,b){var c=dotProgress.applyObjectDefaults(b,dotProgress.defaultOptions);c.halfWidth=Math.round((c.width-c.spacing)/2),c.halfHeight=Math.round((c.height-c.spacing)/2);var d=new dotProgress.Field3d,e=new dotProgress.DotController(window,d,c,shuffle),f=new dotProgress.FieldView(window,document,d,c);a.appendChild(f.div);var g=function(){e.remove(),e=null,f.remove(),f=null,d=null};return{start:e.start,stop:e.stop,setProgress:e.setProgress,remove:g}};var dotProgress=dotProgress||{};dotProgress.applyObjectDefaults=function(a,b){for(var c in b)b.hasOwnProperty(c)&&!a.hasOwnProperty(c)&&(a[c]=b[c]);return a},dotProgress.flatten3d=function(a,b,c,d,e){for(var f,g=Math.sin(b),h=Math.cos(b),i=Math.sin(c),j=Math.cos(c),k=Math.sin(d),l=Math.cos(d),m=e.length,n=0;m>n;n++){f=e[n];var o=f.x3d,p=f.y3d,q=f.z3d,r=h*p-g*q,s=g*p+h*q,t=j*s-i*o,u=i*s+j*o,v=l*u-k*r,w=k*u+l*r,x=a/(a-t);f.scale=x,f.x2d=v*x,f.y2d=w*x}};